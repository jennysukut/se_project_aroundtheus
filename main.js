!function(){"use strict";class t{constructor(t,e){let{data:i,handleImageClick:s}=t;this._name=i.name,this._link=i.link,this._currentCard=e,this._handleImageClick=s}generateCard(){return this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteButton=this._cardElement.querySelector("#card-delete-button"),this.cardTitleElement=this._cardElement.querySelector("#card-title"),this.cardImageElement=this._cardElement.querySelector("#card-image"),this.cardTitleElement.textContent=this._name,this.cardImageElement.src=this._link,this.cardImageElement.alt=this._name,this._setEventListeners(),this._cardElement}_getTemplate(){this._cardElement=document.querySelector(this._currentCard).content.firstElementChild.cloneNode(!0)}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._cardDeleteButton.addEventListener("click",(()=>{this._handleDeleteButton()})),this.cardImageElement.addEventListener("click",(()=>{this._handleImageClick({link:this._link,name:this._name})}))}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_handleLikeButton(){this._cardLikeButton.classList.toggle("card__like-button-active")}}class e{constructor(t,e){this._settings=t,this._formSelector=t.formSelector,this._formElement=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)]}enableValidation(){this._formElement.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}_setEventListeners(){this.toggleButtonState(),this._inputElements.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this.toggleButtonState()}))}))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_showInputError(t){this._errorMessage=document.querySelector(`#${t.id}-error`),t.classList.add(this._inputErrorClass),this._errorMessage.textContent=t.validationMessage,this._errorMessage.classList.add(this._errorClass)}_hideInputError(t){this._errorMessage=document.querySelector(`#${t.id}-error`),t.classList.remove(this._inputErrorClass),this._errorMessage.textContent="",this._errorMessage.classList.remove(this._errorClass)}toggleButtonState(){if(this._hasInvalidInput())return this._disableButton();this._enableButton()}_hasInvalidInput(){return!this._inputElements.every((t=>t.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((t=>{this._hideInputError(t)}))}}class i{constructor(t){this._popupElement=document.querySelector(t),this._popupCloseButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};_handleClickOut(t){t.target.classList.contains("modal")&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(t=>{this._handleClickOut(t)})),this._popupCloseButton.addEventListener("click",(()=>{this.close()}))}}class s extends i{constructor(t,e){super(e),this._handleFormSubmit=t}_getInputValues(){return this._formInputs=Array.from(this._popupElement.querySelectorAll(".modal__form-input")),this.formValues={},this._formInputs.forEach((t=>{this.formValues[t.name]=t.value})),this.formValues}setEventListeners(){this._popupElement.addEventListener("submit",(t=>{this._getInputValues(),this._handleFormSubmit(t),this.resetForm()})),super.setEventListeners()}resetForm(){this._form=this._popupElement.querySelector(".modal__form"),this._form.reset()}}const r=document.querySelector("#profile-edit-button"),n=(document.forms["profile-edit-form"],document.querySelector(".profile__add-button")),o=(document.forms["add-card-form"],{inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"}),a={cardSection:"#cards-list",cardTemplate:"#cards-template",previewModal:"#card-image-modal",addCardForm:"#add-card-modal",cardTitleInput:"#add-card-modal-title",cardLinkInput:"#add-card-modal-link",profileEditForm:"#profile-edit-modal",profileDescription:"#profile-description",profileTitle:"#profile-title",formSelector:".modal__form",editFormTitle:"#edit-profile-modal-title",editFormDetails:"#edit-profile-modal-description",formsSelector:".modal__form"},l=new class{constructor(t,e){this._name=document.querySelector(t),this._description=document.querySelector(e)}getUserInfo(){return this._userInfo={name:this._name.textContent,description:this._description.textContent},this._userInfo}setUserInfo(t){let{name:e,description:i}=t;this._newTitle=e,this._newDescription=i,this._name.textContent=this._newTitle,this._description.textContent=this._newDescription}}(a.profileTitle,a.profileDescription),d=new class extends i{constructor(t){super(t),this._image=this._popupElement.querySelector("#modal-image"),this._description=this._popupElement.querySelector("#card-image-modal-description")}open(t){this._image.src=t.link,this._image.alt=t.name,this._description.textContent=t.name,super.open()}}(a.previewModal),c=new s((function(t){t.preventDefault();const{title:e,link:i}=c.formValues,s=_({name:e,link:i});m.addItem(s),c.resetForm(),h["add-card-form"].resetValidation(),c.close()}),a.addCardForm),m=new class{constructor(t,e){this._renderer=t,this._classContainer=document.querySelector(e)}renderItems(t){t.forEach((t=>{this._element=this._renderer(t),this.addItem(this._element)}))}addItem(t){this._classContainer.prepend(t)}}(_,a.cardSection),u=new s((function(t){t.preventDefault();const{name:e,description:i}=u.formValues;(function(t){let{name:e,description:i}=t;l.setUserInfo({name:e,description:i})})(u.formValues),u.close(),h["profile-edit-form"].resetValidation()}),a.profileEditForm),h={};function _(e){return new t({data:e,handleImageClick:p},"#cards-template").generateCard()}function p(t){d.open(t)}m.renderItems([{name:"Dolomites",link:"https://images.unsplash.com/photo-1683899266164-219e1ebdf029?q=80&w=1964&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Hallstatt",link:"https://images.unsplash.com/photo-1633886648986-ec392f72d900?q=80&w=1854&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Bryce Canyon",link:"https://images.unsplash.com/photo-1631028771413-1389145e26f7?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Biertan",link:"https://images.unsplash.com/photo-1600120834153-6700a1a3399b?q=80&w=1854&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Seceda",link:"https://images.unsplash.com/photo-1670443437765-f0239aebf4b0?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Santorini",link:"https://images.unsplash.com/photo-1613395877344-13d4a8e0d49e?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}]),(t=>{Array.from(document.querySelectorAll(t.formsSelector)).forEach((t=>{const i=new e(o,t),s=t.getAttribute("name");h[s]=i,i.enableValidation()}))})(a),u.setEventListeners(),c.setEventListeners(),d.setEventListeners(),r.addEventListener("click",(()=>{u.open(),function(t,e){const i=document.querySelector(t),s=document.querySelector(e),{description:r,name:n}=l.getUserInfo();i.value=n.trim(),s.value=r.trim()}(a.editFormTitle,a.editFormDetails)})),n.addEventListener("click",(()=>{c.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNyQixDQUVBLFNBQVNSLEVBQWlCOEksR0FDeEJyQyxFQUFhOUIsS0FBS21FLEVBQ3BCLENBbkNBdkMsRUFBWWlDLFlEN0RnQixDQUMxQixDQUNFckksS0FBTSxZQUNORSxLQUFNLDBLQUVSLENBQ0VGLEtBQU0sWUFDTkUsS0FBTSwwS0FFUixDQUNFRixLQUFNLGVBQ05FLEtBQU0sMEtBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLDBLQUVSLENBQ0VGLEtBQU0sU0FDTkUsS0FBTSwwS0FFUixDQUNFRixLQUFNLFlBQ05FLEtBQU0sNEtDb0JnQmlHLEtBQ1BaLE1BQU1DLEtBQ3JCdkUsU0FBUzZCLGlCQUFpQnFELEVBQVVZLGdCQUU3QjVELFNBQVN0QixJQUNoQixNQUFNK0csRUFBWSxJQUFJakgsRUFBY3VFLEVBQW9CckUsR0FDbERnSCxFQUFXaEgsRUFBWWlILGFBQWEsUUFFMUNkLEVBQWVhLEdBQVlELEVBQzNCQSxFQUFVN0Ysa0JBQWtCLEdBQzVCLEVBVUpBLENBQWlCb0QsR0FFakJzQyxFQUFZekQsb0JBRVoyQyxFQUFRM0Msb0JBRVJzQixFQUFhdEIsb0JBeURiZSxFQUFrQjFFLGlCQUFpQixTQUFTLEtBQzFDb0gsRUFBWWpFLE9BOUNkLFNBQXFCdUUsRUFBY0MsR0FDakMsTUFBTUgsRUFBVzVILFNBQVNSLGNBQWNzSSxHQUNsQ0UsRUFBY2hJLFNBQVNSLGNBQWN1SSxJQUNyQyxZQUFFM0IsRUFBVyxLQUFFckgsR0FBU2dILEVBQWdCRyxjQUM5QzBCLEVBQVNsRCxNQUFRM0YsRUFBS2tKLE9BQ3RCRCxFQUFZdEQsTUFBUTBCLEVBQVk2QixNQUNsQyxDQXlDRUMsQ0FBWWhELEVBQVVVLGNBQWVWLEVBQVVXLGdCQUFnQixJQUdqRWQsRUFBYzNFLGlCQUFpQixTQUFTLEtBQ3RDc0csRUFBUW5ELE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVJbWFnZUNsaWNrIH0sIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jdXJyZW50Q2FyZCA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjY2FyZC1kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlXCIpO1xyXG4gICAgdGhpcy5jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLmNhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jdXJyZW50Q2FyZClcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmNhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uLWFjdGl2ZVwiKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKTtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlQ2xpY2tPdXQoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDbGlja091dChldnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoaGFuZGxlRm9ybVN1Ym1pdCwgcG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtLWlucHV0XCIpXHJcbiAgICApO1xyXG4gICAgdGhpcy5mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGV2dCk7XHJcbiAgICAgIHRoaXMucmVzZXRGb3JtKCk7XHJcbiAgICB9KTtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldEZvcm0oKSB7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsIi8q4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAg4pSCIEFSUkFZUyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUglxyXG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxyXG4gICAqL1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkRvbG9taXRlc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY4Mzg5OTI2NjE2NC0yMTllMWViZGYwMjk/cT04MCZ3PTE5NjQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkhhbGxzdGF0dFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYzMzg4NjY0ODk4Ni1lYzM5MmY3MmQ5MDA/cT04MCZ3PTE4NTQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJyeWNlIENhbnlvblwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYzMTAyODc3MTQxMy0xMzg5MTQ1ZTI2Zjc/cT04MCZ3PTE4ODcmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJpZXJ0YW5cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDAxMjA4MzQxNTMtNjcwMGExYTMzOTliP3E9ODAmdz0xODU0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTZWNlZGFcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2NzA0NDM0Mzc3NjUtZjAyMzlhZWJmNGIwP3E9ODAmdz0xOTc0JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJTYW50b3JpbmlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTMzOTU4NzczNDQtMTNkNGE4ZTBkNDllP3E9ODAmdz0xOTM1JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vKiBcclxuICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICAgIOKUgiBFTEVNRU5UUyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXHJcbiAgICAgKi9cclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1lZGl0LWZvcm1cIl07XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1jYXJkLWZvcm1cIl07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uOiBcIiNjYXJkcy1saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkcy10ZW1wbGF0ZVwiLFxyXG4gIHByZXZpZXdNb2RhbDogXCIjY2FyZC1pbWFnZS1tb2RhbFwiLFxyXG4gIGFkZENhcmRGb3JtOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxyXG4gIGNhcmRUaXRsZUlucHV0OiBcIiNhZGQtY2FyZC1tb2RhbC10aXRsZVwiLFxyXG4gIGNhcmRMaW5rSW5wdXQ6IFwiI2FkZC1jYXJkLW1vZGFsLWxpbmtcIixcclxuICBwcm9maWxlRWRpdEZvcm06IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiLFxyXG4gIHByb2ZpbGVUaXRsZTogXCIjcHJvZmlsZS10aXRsZVwiLFxyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBlZGl0Rm9ybVRpdGxlOiBcIiNlZGl0LXByb2ZpbGUtbW9kYWwtdGl0bGVcIixcclxuICBlZGl0Rm9ybURldGFpbHM6IFwiI2VkaXQtcHJvZmlsZS1tb2RhbC1kZXNjcmlwdGlvblwiLFxyXG4gIGZvcm1zU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbn07XHJcbiIsIi8qIFxyXG4gIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkFxyXG4gIOKUgiBJTVBPUlRTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJhcclxuICovXHJcblxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIHNlbGVjdG9ycyxcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBhZGRDYXJkQnV0dG9uLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8qIFxyXG4gIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkFxyXG4gIOKUgiBDUkVBVEUgQ0xBU1MgSU5TVEFOQ0VTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJhcclxuICovXHJcblxyXG5jb25zdCBjdXJyZW50VXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgc2VsZWN0b3JzLnByb2ZpbGVUaXRsZSxcclxuICBzZWxlY3RvcnMucHJvZmlsZURlc2NyaXB0aW9uXHJcbik7XHJcblxyXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLnByZXZpZXdNb2RhbCk7XHJcblxyXG5jb25zdCBhZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQsXHJcbiAgc2VsZWN0b3JzLmFkZENhcmRGb3JtXHJcbik7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKGNyZWF0ZUNhcmQsIHNlbGVjdG9ycy5jYXJkU2VjdGlvbik7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0LFxyXG4gIHNlbGVjdG9ycy5wcm9maWxlRWRpdEZvcm1cclxuKTtcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHNlbGVjdG9ycykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLmZvcm1zU2VsZWN0b3IpXHJcbiAgKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCk7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8q4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAg4pSCIElOSVRJQUxJWkUgSU5TVEFOQ0VTICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUglxyXG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxyXG4gKi9cclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyk7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHNlbGVjdG9ycyk7XHJcblxyXG5wcm9maWxlRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJldmlld01vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vKiBcclxuICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIJcclxuICDilIIgRlVOQ1RJT05TICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCXHJcbiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXHJcbiovXHJcblxyXG5mdW5jdGlvbiB1cGRhdGVVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICBjdXJyZW50VXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Rm9ybUluZm8obmFtZVNlbGVjdG9yLCBkZXRhaWxzU2VsZWN0b3IpIHtcclxuICBjb25zdCBmb3JtTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICBjb25zdCBmb3JtRGV0YWlscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGV0YWlsc1NlbGVjdG9yKTtcclxuICBjb25zdCB7IGRlc2NyaXB0aW9uLCBuYW1lIH0gPSBjdXJyZW50VXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBmb3JtTmFtZS52YWx1ZSA9IG5hbWUudHJpbSgpO1xyXG4gIGZvcm1EZXRhaWxzLnZhbHVlID0gZGVzY3JpcHRpb24udHJpbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljayB9LCBcIiNjYXJkcy10ZW1wbGF0ZVwiKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soaW1nRGF0YSkge1xyXG4gIHByZXZpZXdNb2RhbC5vcGVuKGltZ0RhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSBwcm9maWxlRWRpdC5mb3JtVmFsdWVzO1xyXG4gIHVwZGF0ZVVzZXJJbmZvKHByb2ZpbGVFZGl0LmZvcm1WYWx1ZXMpO1xyXG5cclxuICBwcm9maWxlRWRpdC5jbG9zZSgpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZS1lZGl0LWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCB7IHRpdGxlOiBuYW1lLCBsaW5rIH0gPSBhZGRDYXJkLmZvcm1WYWx1ZXM7XHJcblxyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcblxyXG4gIGFkZENhcmQucmVzZXRGb3JtKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJhZGQtY2FyZC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmQuY2xvc2UoKTtcclxufVxyXG5cclxuLyogXHJcbiAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSCXHJcbiAg4pSCIEVWRU5UIExJU1RFTkVSUyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUglxyXG4gIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxyXG4qL1xyXG5cclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlRWRpdC5vcGVuKCk7XHJcbiAgc2V0Rm9ybUluZm8oc2VsZWN0b3JzLmVkaXRGb3JtVGl0bGUsIHNlbGVjdG9ycy5lZGl0Rm9ybURldGFpbHMpO1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZSk7IC8vcmVtb3ZlIHRleHRDb250ZW50XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZURlc2NyaXB0aW9uKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgdGhpcy5fdXNlckluZm8gPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25ld1RpdGxlID0gbmFtZTtcclxuICAgIHRoaXMuX25ld0Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmV3VGl0bGU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25ld0Rlc2NyaXB0aW9uO1xyXG4gIH1cclxuLypcclxuICBzZXRGb3JtSW5mbyhmb3JtTmFtZSwgZm9ybURldGFpbHMpIHtcclxuICAgIHRoaXMuX2Zvcm1OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtTmFtZSk7XHJcbiAgICB0aGlzLl9mb3JtRGV0YWlscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybURldGFpbHMpO1xyXG4gICAgdGhpcy5fZm9ybU5hbWUudmFsdWUgPSB0aGlzLl91c2VySW5mby5uYW1lO1xyXG4gICAgdGhpcy5fZm9ybURldGFpbHMudmFsdWUgPSB0aGlzLl91c2VySW5mby5kZXNjcmlwdGlvbjtcclxuICB9Ki9cclxuXHJcbiAgLy9zZXRGb3JtSW5mbyBzaG91bGQgbm90IGJlIGluIFVzZXJJbmZvLiBJdCdzIGFib3V0IHRoZSBwcm9maWxlICh0aGUgZm9ybSBpcyBoYW5kbGVkIGluIGluZGV4LmpzKVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNjYXJkLWltYWdlLW1vZGFsLWRlc2NyaXB0aW9uXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmQpIHtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGNhcmQubGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGNhcmQubmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gY2FyZC5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NsYXNzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc1NlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGRhdGEpIHtcclxuICAgIGRhdGEuZm9yRWFjaCgoZGF0YSkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZGF0YSk7XHJcbiAgICAgIHRoaXMuYWRkSXRlbSh0aGlzLl9lbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jbGFzc0NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jdXJyZW50Q2FyZCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiZ2VuZXJhdGVDYXJkIiwiX2dldFRlbXBsYXRlIiwiX2NhcmRMaWtlQnV0dG9uIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiY2FyZFRpdGxlRWxlbWVudCIsImNhcmRJbWFnZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsImRvY3VtZW50IiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zdWJtaXRCdXR0b24iLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIl9lcnJvck1lc3NhZ2UiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsImV2ZXJ5IiwiZGlzYWJsZWQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwRWxlbWVudCIsIl9wb3B1cENsb3NlQnV0dG9uIiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIl9oYW5kbGVDbGlja091dCIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybUlucHV0cyIsIkFycmF5IiwiZnJvbSIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXRGb3JtIiwiX2Zvcm0iLCJyZXNldCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImZvcm1zIiwidmFsaWRhdGlvblNldHRpbmdzIiwic2VsZWN0b3JzIiwiY2FyZFNlY3Rpb24iLCJjYXJkVGVtcGxhdGUiLCJwcmV2aWV3TW9kYWwiLCJhZGRDYXJkRm9ybSIsImNhcmRUaXRsZUlucHV0IiwiY2FyZExpbmtJbnB1dCIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVUaXRsZSIsImVkaXRGb3JtVGl0bGUiLCJlZGl0Rm9ybURldGFpbHMiLCJmb3Jtc1NlbGVjdG9yIiwiY3VycmVudFVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJfZGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsIl91c2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJfbmV3VGl0bGUiLCJfbmV3RGVzY3JpcHRpb24iLCJfaW1hZ2UiLCJjYXJkIiwiYWRkQ2FyZCIsInRpdGxlIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsImZvcm1WYWxpZGF0b3JzIiwicmVuZGVyZXIiLCJjbGFzc1NlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NsYXNzQ29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJfZWxlbWVudCIsImVsZW1lbnQiLCJwcmVwZW5kIiwicHJvZmlsZUVkaXQiLCJ1cGRhdGVVc2VySW5mbyIsImltZ0RhdGEiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsIm5hbWVTZWxlY3RvciIsImRldGFpbHNTZWxlY3RvciIsImZvcm1EZXRhaWxzIiwidHJpbSIsInNldEZvcm1JbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==